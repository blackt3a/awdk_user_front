import{p as C,m as F,g as k,r as R,u as P,c as s,f as T,_ as B,a as L,w as o,b as N,o as x,d as f,t as m,e as p,V as h,h as S}from"./index-hSVOdRUT.js";import{m as D,c as U,V as q,a as j,b,d as A}from"./VTextField-f6XALpPB.js";import{V as E,a as _,b as G,c as w}from"./VCard-G6OPhlm6.js";const I=C({...F(),...D()},"VForm"),O=k()({name:"VForm",props:I(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,a){let{slots:d,emit:g}=a;const t=U(e),r=R();function c(i){i.preventDefault(),t.reset()}function l(i){const u=i,n=t.validate();u.then=n.then.bind(n),u.catch=n.catch.bind(n),u.finally=n.finally.bind(n),g("submit",u),u.defaultPrevented||n.then(y=>{var V;let{valid:v}=y;v&&((V=r.value)==null||V.submit())}),u.preventDefault()}return P(()=>{var i;return s("form",{ref:r,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:c,onSubmit:l},[(i=d.default)==null?void 0:i.call(d,t)])}),T(t,r)}}),z={name:"Login",data(){return{isLoading:!1,messageBar:!1,message:"",base:{Title:""},nameRules:[e=>!!e||this.$i18n.t("login.account_empty")],passwordRules:[e=>!!e||this.$i18n.t("login.password_empty")],inputForm:{Name:"",Password:""}}},created(){this.utils.GET("/base").then(e=>{this.base=e}).catch(()=>this.base.Title="Cardinal")},methods:{onLogin(){this.$refs.form.validate()&&this.utils.POST("/login",this.inputForm,!1).then(e=>{localStorage.setItem("token",e),this.$router.push("/")}).catch(e=>{this.messageBar=!0,this.message=e.response.data.msg})},onReset(){this.inputForm={Name:"",Password:""}}}},H={class:"display-2 font-weight-thin"},J=p("br",null,null,-1),K=p("div",{class:"mt-8 text-center"},"Copyright Â© 2020 Cardinal",-1);function M(e,a,d,g,t,r){const c=N("v-content");return x(),L(c,null,{default:o(()=>[s(q,{modelValue:t.messageBar,"onUpdate:modelValue":a[0]||(a[0]=l=>t.messageBar=l),color:"error",timeout:2e3,top:!0},{default:o(()=>[f(m(t.message),1)]),_:1},8,["modelValue"]),s(j,{align:"center",justify:"center",style:{"margin-top":"12%"}},{default:o(()=>[p("h1",H,m(t.base.Title),1)]),_:1}),J,s(w,{class:"mx-auto","max-width":"400"},{default:o(()=>[s(E,null,{default:o(()=>[f(m(e.$t("login.title")),1)]),_:1}),s(_,null,{default:o(()=>[s(O,{ref:"form"},{default:o(()=>[s(b,{modelValue:t.inputForm.Name,"onUpdate:modelValue":a[1]||(a[1]=l=>t.inputForm.Name=l),rules:t.nameRules,label:e.$t("login.account"),required:"",autocomplete:"off"},null,8,["modelValue","rules","label"]),s(b,{modelValue:t.inputForm.Password,"onUpdate:modelValue":a[2]||(a[2]=l=>t.inputForm.Password=l),rules:t.passwordRules,label:e.$t("login.password"),type:"password",required:"",autocomplete:"off"},null,8,["modelValue","rules","label"])]),_:1},512)]),_:1}),s(G,null,{default:o(()=>[s(h,{text:"",color:"primary",onClick:r.onLogin},{default:o(()=>[f(m(e.$t("login.login")),1)]),_:1},8,["onClick"]),s(h,{text:"",onClick:r.onReset},{default:o(()=>[f(m(e.$t("login.reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),K,s(A,{modelValue:t.isLoading,"onUpdate:modelValue":a[3]||(a[3]=l=>t.isLoading=l),"hide-overlay":"",persistent:"",width:"300"},{default:o(()=>[s(w,{dark:""},{default:o(()=>[s(_,null,{default:o(()=>[p("p",null,m(e.$t("login.loading")),1),s(S,{indeterminate:"",color:"white",class:"mb-0"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Y=B(z,[["render",M]]);export{Y as default};
